<!DOCTYPE html>
<html lang="fr" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>postgresql | code. grind. sleep.</title>

<meta name="keywords" content="" />
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="https://www.orgrim.net/tags/postgresql/" />
<link href="/assets/css/stylesheet.min.e5822bfcb21f8a202b16444ca56d1de6f331407cddd45f1de4a1e0af441b35e4.css" integrity="sha256-5YIr/LIfiiArFkRMpW0d5vMxQHzd1F8d5KHgr0QbNeQ=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://www.orgrim.net/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.orgrim.net/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.orgrim.net/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.orgrim.net/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.orgrim.net/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.83.1" />
<link rel="alternate" type="application/rss&#43;xml" href="https://www.orgrim.net/tags/postgresql/index.xml">
<link rel="alternate" hreflang="fr" href="https://www.orgrim.net/tags/postgresql/" />
<link rel="alternate" hreflang="en" href="https://www.orgrim.net/en/tags/postgresql/" />


<meta property="og:title" content="postgresql" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.orgrim.net/tags/postgresql/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="postgresql"/>
<meta name="twitter:description" content=""/>



</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }
    </style>

</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.orgrim.net/" accesskey="h" title="code. grind. sleep. (Alt + H)">code. grind. sleep.</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                
                

                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://www.orgrim.net/en/" title="English"
                            aria-label="English">En</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://www.orgrim.net/post" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.orgrim.net/categories" title="Catégories">
                    <span>Catégories</span>
                </a>
            </li>
            <li>
                <a href="https://www.orgrim.net/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main"> 
<header class="page-header">

  <h1>postgresql</h1>
</header>





<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      IP flottante pour Patroni avec Keepalived
    </h2>
  </header>
  <section class="entry-content">
    <p>Patroni ne gère que le service PostgreSQL en pilotant la réplication. Il ne fournit volontairement aucun moyen d’accès pour les applications. Elles doivent pourtant déterminer quelle serveur PostgreSQL est accessible en écriture, pour cela une solution est de placer une adresse IP supplémentaire sur ce serveur en écriture qui est déplacée automatique en cas de bascule.
Il faut donc ajouter un service supplémentaire à l’architecture pour gérer la placement de cette adresse IP, généralement appelée, IP virtuelle, VIP, ou IP flottante : Keepalived permet de le faire....</p>
  </section>
  <footer class="entry-footer">2021-06-07&nbsp;·&nbsp;7 min
</footer>
  <a class="entry-link" aria-label="post link to IP flottante pour Patroni avec Keepalived" href="https://www.orgrim.net/post/2021-06-07-keepalived-ip-flottante-patroni/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      PostgreSQL et SELinux à l&#39;ère de systemd
    </h2>
  </header>
  <section class="entry-content">
    <p>Ce post se veut une mise à jour du post précédent sur le sujet. En effet, le module SELinux, les commandes utilisées ont évolué avec l’adoption de systemd. Les principes restent les mêmes.
...</p>
  </section>
  <footer class="entry-footer">2021-02-11&nbsp;·&nbsp;3 min
</footer>
  <a class="entry-link" aria-label="post link to PostgreSQL et SELinux à l&#39;ère de systemd" href="https://www.orgrim.net/post/2021-02-11-postgresql-et-selinux/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      Confiner PostgreSQL avec SELinux
    </h2>
  </header>
  <section class="entry-content">
    <p>.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note{background:#e7f2fA}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip{background:#e6f9e6}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:0.125em;position:relative} Remarque
Ce post est partiellement obsolète, avec le passage à systemd. Voir la mise à jour.
 J’avais déjà expérimenté un peu avec SELinux il y a deux ans sans aller trop loin, parce que j’entendais souvent la phrase “Si on veut de la sécurité, il faut SELinux” et surtout à cause de l’arrivée de l’extension sepgsql dans les modules contrib de PostgreSQL. Ça avait donné une conf pour le Fosdem où finalement, j’ai plus parlé des privilèges classiques que de SELinux.
...</p>
  </section>
  <footer class="entry-footer">2014-09-22&nbsp;·&nbsp;4 min
</footer>
  <a class="entry-link" aria-label="post link to Confiner PostgreSQL avec SELinux" href="https://www.orgrim.net/post/2014-09-22-confiner-postgresql-avec-selinux/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      Oups... des tablespaces imbriqués
    </h2>
  </header>
  <section class="entry-content">
    <p>Imbriquer des tablespaces n’a pas vraiment de sens dans PostgreSQL surtout si on veut se prendre la tête avec des montages dans tous les sens… Mais bon c’est permis, car PostgreSQL utilise uniquement les liens symboliques dans $PGDATA/pg_tblspc pour accéder au contenu des tablespaces.
...</p>
  </section>
  <footer class="entry-footer">2013-04-06&nbsp;·&nbsp;2 min
</footer>
  <a class="entry-link" aria-label="post link to Oups... des tablespaces imbriqués" href="https://www.orgrim.net/post/2013-04-06-oups-des-tablespaces-imbriques/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      Got GUC?
    </h2>
  </header>
  <section class="entry-content">
    <p>Les paramètres de configuration de PostgreSQL sont appelés GUC ce qui signifie Grand Unified Configuration, c’est le nom de la partie du code qui gère les paramètres de configuration. En gros, ce sont tous les paramètres du fichier postgresql.conf.
Ce qui est moins connu et utilisé, c’est la possibilité de configurer ces paramètres à différents niveaux :
 Fichier postgresql.conf Ligne de commande du postmaster, le processus principal du serveur Base de données Rôle Rôle sur une base de données Session Transaction  La précédence des valeurs va en descendant dans la liste, par exemple la valeur d’un paramètre au niveau d’un rôle écrase celle positionnée au niveau de la base de donnée ou la ligne de commande....</p>
  </section>
  <footer class="entry-footer">2012-01-25&nbsp;·&nbsp;3 min
</footer>
  <a class="entry-link" aria-label="post link to Got GUC?" href="https://www.orgrim.net/post/2012-01-25-got-guc/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      Quand PostgreSQL n&#39;a plus d&#39;espace disque à manger
    </h2>
  </header>
  <section class="entry-content">
    <p>Voilà donc une question intéressante, comment se comporte PostgreSQL face à un système de fichier plein ? Un peu d’expérimentation est nécessaire pour se rassurer…
On crée deux systèmes de fichiers de faible taille pour les tests. Le premier stockera PGDATA, ainsi qu’une base de données nommée db_data. Le second sera le tablesapce ts1, dans lequel oncréera une base de données db_ts1.
L’objectif est de montrer que seules les transactions modifiant des objets stockés sur des systèmes de fichier plein sont affectées, c’est pourquoi on a besoin de plusieurs tablespaces....</p>
  </section>
  <footer class="entry-footer">2011-10-14&nbsp;·&nbsp;4 min
</footer>
  <a class="entry-link" aria-label="post link to Quand PostgreSQL n&#39;a plus d&#39;espace disque à manger" href="https://www.orgrim.net/post/2011-10-14-quand-postgresql-na-plus-despace-disque-a-manger/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      Le client de la BuildFarm de PostgreSQL dans pkgsrc-wip
    </h2>
  </header>
  <section class="entry-content">
    <p>Comme j’annonçais précédemment, je contribue deux machines NetBSD à la BuildFarm de PostgreSQL. La compilation ne se fait automagiquement qu’après la configuration du client (écrit en Perl). Il n’est d’ailleurs pas forcément très convi à installer, c’est pourquoi je l’ai packagé pour pkgsrc : http://pkgsrc.se/wip/pgbuildfarm.
...</p>
  </section>
  <footer class="entry-footer">2011-08-06&nbsp;·&nbsp;2 min
</footer>
  <a class="entry-link" aria-label="post link to Le client de la BuildFarm de PostgreSQL dans pkgsrc-wip" href="https://www.orgrim.net/post/2011-08-06-le-client-de-la-buildfarm-de-postgresql-dans-pkgsrc-wip/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      Could not open relation with oid N
    </h2>
  </header>
  <section class="entry-content">
    <p>On peut parfois trouver cet étrange message d’erreur dans les traces de PostgreSQL (N étant un nombre) ou lors de l’exécution d’une requête :
ERROR: could not open relation with OID N  Si on recherche ce message dans les mailing-lists du projet, on peut facilement conclure que la base de données est corrompue, qu’il y a des problèmes matériels et que la sécurité des données est en péril. Et bien, ce n’est pas forcément le cas : obtenir ce message peut être tout à fait normal....</p>
  </section>
  <footer class="entry-footer">2011-08-04&nbsp;·&nbsp;4 min
</footer>
  <a class="entry-link" aria-label="post link to Could not open relation with oid N" href="https://www.orgrim.net/post/2011-08-04-could-not-open-relation-with-oid-n/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      Retrouver un trigger à partir du nom de la fonction associée
    </h2>
  </header>
  <section class="entry-content">
    <p>Ici encore, tout est dans le catalogue système de PostgreSQL, il suffit de regarder dans la table pg_trigger.
...</p>
  </section>
  <footer class="entry-footer">2011-04-07&nbsp;·&nbsp;1 min
</footer>
  <a class="entry-link" aria-label="post link to Retrouver un trigger à partir du nom de la fonction associée" href="https://www.orgrim.net/post/2011-04-07-retrouver-un-trigger-a-partir-du-nom-de-la-fonction-associee/"></a>
</article>

<article class="post-entry tag-entry"> 

  <header class="entry-header">
    <h2>
      pg_class.reltuples n&#39;est qu&#39;une approximation du nombre de lignes
    </h2>
  </header>
  <section class="entry-content">
    <p>Dans le catalogue de PostgreSQL, qui donne plein d’information sur le cluster et la base de données, la table pg_class regroupe les informations sur les tables, les séquences, les index, tout ce qui contient des colonnes, appelé relation. L’un des champs disponibles est reltuples, il contient le nombre approximatif de lignes dans une relation. C’est approximatif, ainsi ce n’est pas un donnée sure… La preuve par l’exemple.
...</p>
  </section>
  <footer class="entry-footer">2011-03-14&nbsp;·&nbsp;2 min
</footer>
  <a class="entry-link" aria-label="post link to pg_class.reltuples n&#39;est qu&#39;une approximation du nombre de lignes" href="https://www.orgrim.net/post/2011-03-14-pg_classreltuples-nest-quune-approximation-du-nombre-de-lignes/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://www.orgrim.net/tags/postgresql/page/2/">Page Suivante »</a>
  </nav>
</footer>

    </main><footer class="footer">
    <span>&copy; 2021 <a href="https://www.orgrim.net/">code. grind. sleep.</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
