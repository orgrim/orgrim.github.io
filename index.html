<!DOCTYPE html>


<html lang="fr" data-theme="">
<head>
	<meta name="generator" content="Hugo 0.76.4" />
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>code. grind. sleep.</title>
<meta name="description" content="">

<link rel="alternate" type="application/rss+xml" href="https://www.orgrim.net/index.xml" title="code. grind. sleep." />
<link rel="icon" type="image/x-icon" href="https://www.orgrim.net/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://www.orgrim.net/favicon.png">



    





    
    
    

    
        <link rel="stylesheet" href="https://www.orgrim.net/css/style.6155b6d8eded05b985178f56a637943b3e7fcfccc913d9c656bbebce7c91cc6b.css" integrity="sha256-YVW22O3tBbmFF49WpjeUOz5/z8zJE9nGVrvrznyRzGs=">
    





    





    
        <link rel="stylesheet" href="https://www.orgrim.net/css/custom.css?rnd=1613063810">
    


    





    
        <link rel="stylesheet" href="https://www.orgrim.net/css/syntax.css?rnd=1613063810">
    




<meta property="og:title" content="code. grind. sleep." />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.orgrim.net/" />
<meta property="og:updated_time" content="2021-02-11T10:00:00+01:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="code. grind. sleep."/>
<meta name="twitter:description" content=""/>









    
</head>
<body>
    <a class="skip-main" href="#main">Aller au contenu</a>
    <div class="container">
        <header class="common-header"> 
            
                <h1 class="site-title">
    <a href="/">code. grind. sleep.</a>
</h1>

    <nav>
        
        
        <a class="" href="https://www.orgrim.net/post" title="">Blog</a>
        
        <a class="" href="https://www.orgrim.net/categories" title="">Categories</a>
        
        <a class="" href="https://www.orgrim.net/tags" title="">Tags</a>
        
    </nav>


            
        </header>
        <main id="main" tabindex="-1"> 
            
    <div class="homepage-content">
        
    </div>

    
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2021-02-11-postgresql-et-selinux/">PostgreSQL et SELinux à l&#39;ère de systemd</a></h1>
    </header>

    <div class="content post-summary">
        <p>Ce post se veut une mise à jour du <a href="/post/2014-09-22-confiner-postgresql-avec-selinux/">post précédent</a> sur le sujet. En
effet, le module SELinux, les commandes utilisées ont évolué avec
l&rsquo;adoption de systemd. Les principes restent les mêmes.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2021-02-11</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">PostgreSQL</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/postgresql">#postgresql</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/selinux">#selinux</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2021-01-20-installer-go/">Installer Go</a></h1>
    </header>

    <div class="content post-summary">
        <p>Le langage Go est de plus en plus présent, on peut installer son
compilateur et suite d&rsquo;outil à partir des packages de sa distribution,
mais le plus simple pour avoir une version la plus à jour possible est
d&rsquo;utiliser les binaires compilés fournis sur le site officiel.</p>
<p>La version du package <code>golang-go</code> est trop ancienne dans Debian stable
(1.11), je l&rsquo;ai donc installé de la façon suivante.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2021-01-20</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">Code</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/go">#go</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/install">#install</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2020-07-28-memento-cloud-init/">Memento Cloud Init</a></h1>
    </header>

    <div class="content post-summary">
        <p>Cloud Init permet de configurer des machines virtuelles au boot, en utilissant des méta données provenant de la plateforme ou tourne la VM (AWS, Azure, GCP, KVM Local, etc). Pour une installation sur KVM avec libvirt, il faut utiliser le module NoCloud :</p>
<ol>
<li>Installer le système dans un KVM, avec <code>virt-manager</code> et une image ISO</li>
<li>Installer le paquet <code>cloud-init</code> (et le paquet <code>sudo</code> pour que le reste fonctionne)</li>
</ol>
<pre><code class="language-console" data-lang="console"># yum install cloud-init sudo
</code></pre><ol start="3">
<li>Eteindre la VM</li>
<li>Créer un répertoire de travail et s&rsquo;y déplacer</li>
<li>Créer les 3 fichiers :</li>
</ol>
<ul>
<li><code>user-data</code> : contient la configuration pour ajouter son user, sa clé SSH, configurer sudo, configurer le mot de passe <code>root</code></li>
<li><code>meta-data</code> : contient la configuration de la machine, le hostname, etc</li>
<li><code>network-config</code> : contient la configuration du réseau</li>
</ul>
<ol start="6">
<li>Créer l&rsquo;image ISO :</li>
</ol>
<pre><code class="language-console" data-lang="console">$ genisoimage -output cloudinit_la_vm.iso -volid cidata -joliet -rock user-data meta-data network-config
</code></pre><ol start="7">
<li>Attacher l&rsquo;image ISO</li>
<li>Démarrer la VM</li>
</ol>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2020-07-28</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">Unix</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/unix">#unix</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/cloud-init">#cloud-init</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/libvirt">#libvirt</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2017-10-30-gestion-des-utilisateurs-pgbouncer-avec-auth-query/">Gestion des utilisateurs pgBouncer avec auth_query</a></h1>
    </header>

    <div class="content post-summary">
        <p>Avec pgBouncer 1.6 sont arrivés deux nouveaux paramètres, <code>auth_user</code> et
<code>auth_query</code>, qui permettent de faciliter la gestion du fichier des
utilisateurs. Le fichier des utilisateurs contient les couples
utilisateur / mot de passe hashé pour s&rsquo;authentifier à la place de
l&rsquo;utilisateur final sur le serveur PostgreSQL. Il y a deux problèmes
majeurs avec ce fichier utilisateur : son maintien fastidieux et le
risque de collision entre noms de roles identiques mais avec des mots
de passe différents si le même pgBoucner accède à plusieurs instances
PostgreSQL.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2017-10-30</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">PostgreSQL</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/pgbouncer">#pgbouncer</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/auth">#auth</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2017-10-27-configuration-de-pgbouncer-avec-des-connexions-tls/">Configuration de pgBouncer avec des connexions TLS</a></h1>
    </header>

    <div class="content post-summary">
        <p>Un petit howto pour créer des certificats et les utiliser avec PostgreSQL et pgBouncer.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2017-10-27</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">PostgreSQL</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/pgbouncer">#pgbouncer</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/auth">#auth</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2015-12-30-reflexions-sur-larchivage-des-fichiers-wal/">Réflexions sur l&#39;archivage des fichiers WAL</a></h1>
    </header>

    <div class="content post-summary">
        <p>PostgreSQL faisant son bonhomme de chemin, on se retrouve désormais
avec des configurations où il faut archiver plusieurs fois les WAL
parce qu&rsquo;on a de la sauvegarde PITR et de la réplication.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2015-12-30</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">PostgreSQL</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/archiving">#archiving</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/wal">#wal</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/replication">#replication</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2015-03-12-pg-back-le-script-de-base-pour-sauvegarder-postgresql/">pg_back le script de base pour sauvegarder PostgreSQL</a></h1>
    </header>

    <div class="content post-summary">
        <p>Il y a fort longtemps, et c&rsquo;est ma première contribution relative à
PostgreSQL, j&rsquo;ai écrit un script de backup qui dump tout un serveur
PostgreSQL avec <code>pg_dump</code> et <code>pg_dumpall</code>. Il s&rsquo;agit de pg_back.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2015-03-12</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">PostgreSQL</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/pg_back">#pg_back</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/backup">#backup</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/dump">#dump</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2014-09-22-confiner-postgresql-avec-selinux/">Confiner PostgreSQL avec SELinux</a></h1>
    </header>

    <div class="content post-summary">
        <style type="text/css">.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note{background:#e7f2fA}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip{background:#e6f9e6}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:0.125em;position:relative}</style>
<svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg><div class="notice note" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#note-notice"></use></svg></span>Remarque</p><p>Ce post est partiellement obsolète, avec le passage
à systemd. Voir la <a href="/post/2021-02-11-postgresql-et-selinux/">mise à jour</a>.</p></div>

<p>J&rsquo;avais déjà expérimenté un peu avec SELinux il y a deux ans sans
aller trop loin, parce que j&rsquo;entendais souvent la phrase &ldquo;Si on veut
de la sécurité, il faut SELinux&rdquo; et surtout à cause de l&rsquo;arrivée de
l&rsquo;extension <code>sepgsql</code> dans les modules contrib de PostgreSQL. Ça avait
donné une conf pour le Fosdem où finalement, j&rsquo;ai plus parlé des
privilèges classiques que de SELinux.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2014-09-22</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">PostgreSQL</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/postgresql">#postgresql</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/selinux">#selinux</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2014-05-28-migration-du-blog-sur-github/">Migration du blog sur github</a></h1>
    </header>

    <div class="content post-summary">
        <p>Finalement le temps ne me permettant plus d&rsquo;administrer mon serveur
dédié comme il faut, j&rsquo;ai décidé de l&rsquo;abondonner et transférer mes
services ailleurs. Pour le blog et le wiki, j&rsquo;ai choisi de faire un
site/blog github avec jekyll, vu que c&rsquo;est tout prémaché.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2014-05-28</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">Unix</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/blog">#blog</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/pandoc">#pandoc</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/2013-08-23-modular-xorg-radeon-et-pas-de-kms/">modular-xorg, radeon et pas de KMS</a></h1>
    </header>

    <div class="content post-summary">
        <p>Il y avait un moment que je n&rsquo;avais pas touché à NetBSD et donc mis à
jour mon lappy avec du pkg frais. Entre temps, la version de X.org
modular, donc issue de pkgsrc, est revenue en 2012, avec son lot de
drivers mis à jour. Le drivers xf86-video-ati, est passé en version
7.1.0, sauf qu&rsquo;il fonctionne uniquement en KMS (Kernel Mode Setting),
chose qu&rsquo;on n&rsquo;a pas encore dans notre kernel.</p>
    </div>
    
    
    

    


<div class="post-info">
    
        <div class="post-date">2013-08-23</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://www.orgrim.net/categories/">NetBSD</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://www.orgrim.net/tags/netbsd">#netbsd</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/x11">#X11</a></li>
                    
                        <li><a href="https://www.orgrim.net/tags/pkgsrc">#pkgsrc</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
    
    
        
    <div class="pagination">
        <div class="left pagination-item disabled">
            
        </div>
        <div class="right pagination-item ">
            
                <a href="/page/2/">articles &#43; anciens</a>
            
        </div>
    </div>




        </main>
        
            <footer class="common-footer">
    
    
        <ul class="language-select">

<li><a href="https://www.orgrim.net/">Français</a></li>

<li><a href="https://www.orgrim.net/en/">English</a></li>

</ul>
    

    <div class="common-footer-bottom">
        
            
            <ul class="footer-menu">
            
            <li><a class="" href="https://twitter.com/orgrim" title="Twitter">@orgrim</a></li>
            
            <li><a class="" href="https://github.com/orgrim" title="">github</a></li>
            
            </ul>
        
        <div class="copyright">
            <p>© Nicolas Thauvin, 2021<br>
            Propulsé par <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, thème <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.
            </p>  
        </div> 

        

    



    <button class="theme-switcher">
        Thème sombre
    </button>

    <script>
    const STORAGE_KEY = 'user-color-scheme'
    const defaultTheme = "dark"

    let currentTheme
    let switchButton
    let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

    const autoChangeScheme = e => {
        currentTheme = e.matches ? 'dark' : 'light'
        document.documentElement.setAttribute('data-theme', currentTheme)
        changeButtonText()
    }

    document.addEventListener('DOMContentLoaded', function() {
        switchButton = document.querySelector('.theme-switcher')
        currentTheme = detectCurrentScheme()
        if (currentTheme == 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark')
        }
        if (currentTheme == 'auto') {
            autoChangeScheme(autoDefinedScheme);
            autoDefinedScheme.addListener(autoChangeScheme);
        }
        changeButtonText()
        switchButton.addEventListener('click', switchTheme, false)
    })

    function detectCurrentScheme() {
        if (localStorage.getItem(STORAGE_KEY)) {
            return localStorage.getItem(STORAGE_KEY)
        } 
        if (defaultTheme) {
            return defaultTheme
        } 
        if (!window.matchMedia) {
            return 'light'
        } 
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            return 'dark'
        }
        return 'light'
    }

    function changeButtonText()
    {   
        switchButton.textContent = currentTheme == 'dark' ?  "Thème clair" : "Thème sombre"
    }

    function switchTheme(e) {
        if (currentTheme == 'dark') {
            localStorage.setItem(STORAGE_KEY, 'light')
            document.documentElement.setAttribute('data-theme', 'light')
            currentTheme = 'light'
        } else {
            localStorage.setItem(STORAGE_KEY, 'dark')
            document.documentElement.setAttribute('data-theme', 'dark')
            currentTheme = 'dark'
        }
        changeButtonText()
    }
    </script>
   
    </div>
</footer>

        
    </div>
</body>
</html>
