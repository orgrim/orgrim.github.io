<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on code. grind. sleep.</title>
    <link>https://www.orgrim.net/post/</link>
    <description>Recent content in Posts on code. grind. sleep.</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fr</language>
    <managingEditor>Nicolas Thauvin</managingEditor>
    <lastBuildDate>Mon, 07 Jun 2021 11:35:02 +0200</lastBuildDate><atom:link href="https://www.orgrim.net/post/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>IP flottante pour Patroni avec Keepalived</title>
      <link>https://www.orgrim.net/post/2021-06-07-keepalived-ip-flottante-patroni/</link>
      <pubDate>Mon, 07 Jun 2021 11:35:02 +0200</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2021-06-07-keepalived-ip-flottante-patroni/</guid>
      <description>Patroni ne gère que le service PostgreSQL en pilotant la réplication. Il ne fournit volontairement aucun moyen d&amp;rsquo;accès pour les applications. Elles doivent pourtant déterminer quelle serveur PostgreSQL est accessible en écriture, pour cela une solution est de placer une adresse IP supplémentaire sur ce serveur en écriture qui est déplacée automatique en cas de bascule.
Il faut donc ajouter un service supplémentaire à l&amp;rsquo;architecture pour gérer la placement de cette adresse IP, généralement appelée, IP virtuelle, VIP, ou IP flottante : Keepalived permet de le faire.</description>
    </item>
    
    <item>
      <title>Installer CFSSL</title>
      <link>https://www.orgrim.net/post/2021-04-06-installer-cfssl/</link>
      <pubDate>Tue, 06 Apr 2021 22:30:00 +0200</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2021-04-06-installer-cfssl/</guid>
      <description>&lt;p&gt;CFSSL est l&amp;rsquo;outil de gestion de certificats TLS de CloudFlare, son principal
avantage est de pouvoir créer des certificats en utilisant une configuration au
format JSON bien plus facile à appréhender qu&amp;rsquo;OpenSSL.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>PostgreSQL et SELinux à l&#39;ère de systemd</title>
      <link>https://www.orgrim.net/post/2021-02-11-postgresql-et-selinux/</link>
      <pubDate>Thu, 11 Feb 2021 10:00:00 +0100</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2021-02-11-postgresql-et-selinux/</guid>
      <description>&lt;p&gt;Ce post se veut une mise à jour du &lt;a href=&#34;https://www.orgrim.net/post/2014-09-22-confiner-postgresql-avec-selinux/&#34;&gt;post précédent&lt;/a&gt; sur le sujet. En
effet, le module SELinux, les commandes utilisées ont évolué avec
l&amp;rsquo;adoption de systemd. Les principes restent les mêmes.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Installer Go</title>
      <link>https://www.orgrim.net/post/2021-01-20-installer-go/</link>
      <pubDate>Wed, 20 Jan 2021 21:58:54 +0100</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2021-01-20-installer-go/</guid>
      <description>&lt;p&gt;Le langage Go est de plus en plus présent, on peut installer son
compilateur et suite d&amp;rsquo;outil à partir des packages de sa distribution,
mais le plus simple pour avoir une version la plus à jour possible est
d&amp;rsquo;utiliser les binaires compilés fournis sur le site officiel.&lt;/p&gt;
&lt;p&gt;La version du package &lt;code&gt;golang-go&lt;/code&gt; est trop ancienne dans Debian stable
(1.11), je l&amp;rsquo;ai donc installé de la façon suivante.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Memento Cloud Init</title>
      <link>https://www.orgrim.net/post/2020-07-28-memento-cloud-init/</link>
      <pubDate>Tue, 28 Jul 2020 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2020-07-28-memento-cloud-init/</guid>
      <description>Utiliser simplemant Cloud Init avec libvirt</description>
    </item>
    
    <item>
      <title>Gestion des utilisateurs pgBouncer avec auth_query</title>
      <link>https://www.orgrim.net/post/2017-10-30-gestion-des-utilisateurs-pgbouncer-avec-auth-query/</link>
      <pubDate>Mon, 30 Oct 2017 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2017-10-30-gestion-des-utilisateurs-pgbouncer-avec-auth-query/</guid>
      <description>&lt;p&gt;Avec pgBouncer 1.6 sont arrivés deux nouveaux paramètres, &lt;code&gt;auth_user&lt;/code&gt; et
&lt;code&gt;auth_query&lt;/code&gt;, qui permettent de faciliter la gestion du fichier des
utilisateurs. Le fichier des utilisateurs contient les couples
utilisateur / mot de passe hashé pour s&amp;rsquo;authentifier à la place de
l&amp;rsquo;utilisateur final sur le serveur PostgreSQL. Il y a deux problèmes
majeurs avec ce fichier utilisateur : son maintien fastidieux et le
risque de collision entre noms de roles identiques mais avec des mots
de passe différents si le même pgBoucner accède à plusieurs instances
PostgreSQL.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Configuration de pgBouncer avec des connexions TLS</title>
      <link>https://www.orgrim.net/post/2017-10-27-configuration-de-pgbouncer-avec-des-connexions-tls/</link>
      <pubDate>Fri, 27 Oct 2017 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2017-10-27-configuration-de-pgbouncer-avec-des-connexions-tls/</guid>
      <description>&lt;p&gt;Un petit howto pour créer des certificats et les utiliser avec PostgreSQL et pgBouncer.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Réflexions sur l&#39;archivage des fichiers WAL</title>
      <link>https://www.orgrim.net/post/2015-12-30-reflexions-sur-larchivage-des-fichiers-wal/</link>
      <pubDate>Wed, 30 Dec 2015 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2015-12-30-reflexions-sur-larchivage-des-fichiers-wal/</guid>
      <description>&lt;p&gt;PostgreSQL faisant son bonhomme de chemin, on se retrouve désormais
avec des configurations où il faut archiver plusieurs fois les WAL
parce qu&amp;rsquo;on a de la sauvegarde PITR et de la réplication.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pg_back le script de base pour sauvegarder PostgreSQL</title>
      <link>https://www.orgrim.net/post/2015-03-12-pg-back-le-script-de-base-pour-sauvegarder-postgresql/</link>
      <pubDate>Thu, 12 Mar 2015 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2015-03-12-pg-back-le-script-de-base-pour-sauvegarder-postgresql/</guid>
      <description>&lt;p&gt;Il y a fort longtemps, et c&amp;rsquo;est ma première contribution relative à
PostgreSQL, j&amp;rsquo;ai écrit un script de backup qui dump tout un serveur
PostgreSQL avec &lt;code&gt;pg_dump&lt;/code&gt; et &lt;code&gt;pg_dumpall&lt;/code&gt;. Il s&amp;rsquo;agit de pg_back.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Confiner PostgreSQL avec SELinux</title>
      <link>https://www.orgrim.net/post/2014-09-22-confiner-postgresql-avec-selinux/</link>
      <pubDate>Mon, 22 Sep 2014 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2014-09-22-confiner-postgresql-avec-selinux/</guid>
      <description>&lt;style type=&#34;text/css&#34;&gt;.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note{background:#e7f2fA}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip{background:#e6f9e6}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:0.125em;position:relative}&lt;/style&gt;
&lt;svg width=&#34;0&#34; height=&#34;0&#34; display=&#34;none&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;&lt;symbol id=&#34;tip-notice&#34; viewBox=&#34;0 0 512 512&#34; preserveAspectRatio=&#34;xMidYMid meet&#34;&gt;&lt;path d=&#34;M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z&#34;/&gt;&lt;/symbol&gt;&lt;symbol id=&#34;note-notice&#34; viewBox=&#34;0 0 512 512&#34; preserveAspectRatio=&#34;xMidYMid meet&#34;&gt;&lt;path d=&#34;M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z&#34;/&gt;&lt;/symbol&gt;&lt;symbol id=&#34;warning-notice&#34; viewBox=&#34;0 0 576 512&#34; preserveAspectRatio=&#34;xMidYMid meet&#34;&gt;&lt;path d=&#34;M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z&#34;/&gt;&lt;/symbol&gt;&lt;symbol id=&#34;info-notice&#34; viewBox=&#34;0 0 512 512&#34; preserveAspectRatio=&#34;xMidYMid meet&#34;&gt;&lt;path d=&#34;M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z&#34;/&gt;&lt;/symbol&gt;&lt;/svg&gt;&lt;div class=&#34;notice note&#34; &gt;
&lt;p class=&#34;first notice-title&#34;&gt;&lt;span class=&#34;icon-notice baseline&#34;&gt;&lt;svg&gt;&lt;use href=&#34;#note-notice&#34;&gt;&lt;/use&gt;&lt;/svg&gt;&lt;/span&gt;Remarque&lt;/p&gt;&lt;p&gt;Ce post est partiellement obsolète, avec le passage
à systemd. Voir la &lt;a href=&#34;https://www.orgrim.net/post/2021-02-11-postgresql-et-selinux/&#34;&gt;mise à jour&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;

&lt;p&gt;J&amp;rsquo;avais déjà expérimenté un peu avec SELinux il y a deux ans sans
aller trop loin, parce que j&amp;rsquo;entendais souvent la phrase &amp;ldquo;Si on veut
de la sécurité, il faut SELinux&amp;rdquo; et surtout à cause de l&amp;rsquo;arrivée de
l&amp;rsquo;extension &lt;code&gt;sepgsql&lt;/code&gt; dans les modules contrib de PostgreSQL. Ça avait
donné une conf pour le Fosdem où finalement, j&amp;rsquo;ai plus parlé des
privilèges classiques que de SELinux.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Migration du blog sur github</title>
      <link>https://www.orgrim.net/post/2014-05-28-migration-du-blog-sur-github/</link>
      <pubDate>Wed, 28 May 2014 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2014-05-28-migration-du-blog-sur-github/</guid>
      <description>&lt;p&gt;Finalement le temps ne me permettant plus d&amp;rsquo;administrer mon serveur
dédié comme il faut, j&amp;rsquo;ai décidé de l&amp;rsquo;abondonner et transférer mes
services ailleurs. Pour le blog et le wiki, j&amp;rsquo;ai choisi de faire un
site/blog github avec jekyll, vu que c&amp;rsquo;est tout prémaché.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>modular-xorg, radeon et pas de KMS</title>
      <link>https://www.orgrim.net/post/2013-08-23-modular-xorg-radeon-et-pas-de-kms/</link>
      <pubDate>Fri, 23 Aug 2013 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2013-08-23-modular-xorg-radeon-et-pas-de-kms/</guid>
      <description>&lt;p&gt;Il y avait un moment que je n&amp;rsquo;avais pas touché à NetBSD et donc mis à
jour mon lappy avec du pkg frais. Entre temps, la version de X.org
modular, donc issue de pkgsrc, est revenue en 2012, avec son lot de
drivers mis à jour. Le drivers xf86-video-ati, est passé en version
7.1.0, sauf qu&amp;rsquo;il fonctionne uniquement en KMS (Kernel Mode Setting),
chose qu&amp;rsquo;on n&amp;rsquo;a pas encore dans notre kernel.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Un bulk build par jour dans un screen</title>
      <link>https://www.orgrim.net/post/2013-05-10-un-bulk-build-par-jour-dans-un-screen/</link>
      <pubDate>Fri, 10 May 2013 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2013-05-10-un-bulk-build-par-jour-dans-un-screen/</guid>
      <description>&lt;p&gt;Mes packages NetBSD sont préparés par pbulk, qui tourne en continu grâce
au script &lt;a href=&#34;https://github.com/orgrim/nb-utils/blob/master/pkgsrc/pbulk-builder&#34;&gt;pbulk-builder&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Oups... des tablespaces imbriqués</title>
      <link>https://www.orgrim.net/post/2013-04-06-oups-des-tablespaces-imbriques/</link>
      <pubDate>Sat, 06 Apr 2013 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2013-04-06-oups-des-tablespaces-imbriques/</guid>
      <description>&lt;p&gt;Imbriquer des tablespaces n&amp;rsquo;a pas vraiment de sens dans PostgreSQL
surtout si on veut se prendre la tête avec des montages dans tous les
sens&amp;hellip; Mais bon c&amp;rsquo;est permis, car PostgreSQL utilise uniquement les
liens symboliques dans &lt;code&gt;$PGDATA/pg_tblspc&lt;/code&gt; pour accéder au contenu des
tablespaces.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pbulk-builder et pkgtools/mksandbox</title>
      <link>https://www.orgrim.net/post/2013-01-26-pbulk-builder-et-pkgtoolsmksandbox/</link>
      <pubDate>Sat, 26 Jan 2013 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2013-01-26-pbulk-builder-et-pkgtoolsmksandbox/</guid>
      <description>&lt;p&gt;Après la réinstall d&amp;rsquo;une de mes machines de build en 6.0.1, j&amp;rsquo;ai eu la
bonne surprise de voir que le script de build &lt;code&gt;pbulk-builder&lt;/code&gt;
(&lt;a href=&#34;https://github.com/orgrim/nb-utils&#34;&gt;https://github.com/orgrim/nb-utils&lt;/a&gt;) ne trouvait plus &lt;code&gt;mksandbox&lt;/code&gt;
dans l&amp;rsquo;arbre de pkgsrc. Il est désormais dans son paquet :
&lt;code&gt;pkgtools/mksandbox&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Got GUC?</title>
      <link>https://www.orgrim.net/post/2012-01-25-got-guc/</link>
      <pubDate>Wed, 25 Jan 2012 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2012-01-25-got-guc/</guid>
      <description>Les paramètres de configuration de PostgreSQL sont appelés GUC ce qui signifie Grand Unified Configuration, c&amp;rsquo;est le nom de la partie du code qui gère les paramètres de configuration. En gros, ce sont tous les paramètres du fichier postgresql.conf.
Ce qui est moins connu et utilisé, c&amp;rsquo;est la possibilité de configurer ces paramètres à différents niveaux :
 Fichier postgresql.conf Ligne de commande du postmaster, le processus principal du serveur Base de données Rôle Rôle sur une base de données Session Transaction  La précédence des valeurs va en descendant dans la liste, par exemple la valeur d&amp;rsquo;un paramètre au niveau d&amp;rsquo;un rôle écrase celle positionnée au niveau de la base de donnée ou la ligne de commande.</description>
    </item>
    
    <item>
      <title>Compiler dans l&#39;arbre des sources</title>
      <link>https://www.orgrim.net/post/2012-01-24-compiler-dans-larbre-des-sources/</link>
      <pubDate>Tue, 24 Jan 2012 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2012-01-24-compiler-dans-larbre-des-sources/</guid>
      <description>&lt;p&gt;Je m&amp;rsquo;occupe actuellement de préparer ma box pour le FOSDEM, et il
s&amp;rsquo;avère qu&amp;rsquo;il manque le support du DRM (Direct Rendering Manager, le
truc pour avoir de l&amp;rsquo;accélération graphique dans le kernel pour X.org)
pour ma carte vidéo. Il s&amp;rsquo;agit de NetBSD 5.1.1, la version 6 n&amp;rsquo;aura pas
ce manque.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>X11 forwarding request failed on channel 0</title>
      <link>https://www.orgrim.net/post/2011-10-21-x11-forwarding-request-failed-on-channel-0/</link>
      <pubDate>Fri, 21 Oct 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-10-21-x11-forwarding-request-failed-on-channel-0/</guid>
      <description>Quand j&amp;rsquo;essaye de me logguer sur ma box NetBSD fraichement passé en X.org modular, j&amp;rsquo;ai ça :
orgrim@serfouette ~ $ ssh rateau X11 forwarding request failed on channel 0 Last login: Fri Oct 21 12:20:24 2011 from serfouette.home.orgrim.net  WTF? ça tombe en marche SSH normalement.
Et bien le souci vient de l&amp;rsquo;échange des magic cookies pour l&amp;rsquo;authentification entre serveurs X à travers SSH, c&amp;rsquo;est utilisé par le X11 forwarding et on a besoin de plusieurs choses pour ça :</description>
    </item>
    
    <item>
      <title>Quand PostgreSQL n&#39;a plus d&#39;espace disque à manger</title>
      <link>https://www.orgrim.net/post/2011-10-14-quand-postgresql-na-plus-despace-disque-a-manger/</link>
      <pubDate>Fri, 14 Oct 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-10-14-quand-postgresql-na-plus-despace-disque-a-manger/</guid>
      <description>Voilà donc une question intéressante, comment se comporte PostgreSQL face à un système de fichier plein ? Un peu d&amp;rsquo;expérimentation est nécessaire pour se rassurer&amp;hellip;
On crée deux systèmes de fichiers de faible taille pour les tests. Le premier stockera PGDATA, ainsi qu&amp;rsquo;une base de données nommée db_data. Le second sera le tablesapce ts1, dans lequel oncréera une base de données db_ts1.
L&amp;rsquo;objectif est de montrer que seules les transactions modifiant des objets stockés sur des systèmes de fichier plein sont affectées, c&amp;rsquo;est pourquoi on a besoin de plusieurs tablespaces.</description>
    </item>
    
    <item>
      <title>Passer de X.org natif à modular</title>
      <link>https://www.orgrim.net/post/2011-09-19-passer-de-xorg-natif-a-modular/</link>
      <pubDate>Mon, 19 Sep 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-09-19-passer-de-xorg-natif-a-modular/</guid>
      <description>&lt;p&gt;X.org est fourni dans le basesys et dans pkgsrc, on appelle le premier
« native » et le second « modular » selon la valeur de la variable
&lt;code&gt;X11_TYPE&lt;/code&gt; que l&amp;rsquo;on positionne dans son &lt;code&gt;/etc/mk.conf&lt;/code&gt; pour signifier à
pkgsrc sur lequel linker.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Bulk build partiel de pkgsrc</title>
      <link>https://www.orgrim.net/post/2011-08-19-bulk-build-partiel-de-pkgsrc/</link>
      <pubDate>Fri, 19 Aug 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-08-19-bulk-build-partiel-de-pkgsrc/</guid>
      <description>En suivant l&#39;excellent tip de Mr GuiGui2, j&amp;rsquo;ai pu monter ma petite archi de bulk build personnelle pour fournir du package tout frais à pkgin.
J&amp;rsquo;ai donc ajouté le bloc magique suivant à mon /etc/mk.conf, qui permet de gérer la présence de commentaires dans pkgchk.conf :
# bulk build config DEPENDS_TARGET= bulk-install BATCH= yes BULK_PREREQ+= pkgtools/lintpkgsrc .if defined(SPECIFIC_PKGS) PKGLIST!= awk &#39;$$1 !~ /^\\#/ {print $$1}&#39; ${PKGCHK_CONF} . for _pkg_ in ${PKGLIST} HOST_SPECIFIC_PKGS+= ${_pkg_} .</description>
    </item>
    
    <item>
      <title>Montrer les dépendances avec make dans pkgsrc</title>
      <link>https://www.orgrim.net/post/2011-08-18-montrer-les-dependances-avec-make-dans-pkgsrc/</link>
      <pubDate>Thu, 18 Aug 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-08-18-montrer-les-dependances-avec-make-dans-pkgsrc/</guid>
      <description>Généralement, on peut savoir quelles sont les dépendances d&amp;rsquo;un package en utilisant make show-depends, mais cela ne montre que les dépendances pour l&amp;rsquo;installation, les dépendances pour la compilation ne sont pas montrées.
$ cd /usr/pkgsrc/databases/postgresql90-server/ $ make show-depends postgresql90-client&amp;gt;=9.0.4:../../databases/postgresql90-client  Pour connaître les dépendances selon leur type (installation ou compilation), on peut utiliser la cible show-depends-pkgpaths alliée à la variable DEPENDS_TYPE.
Pour avoir seulement les dépendances de compilation :
$ make DEPENDS_TYPE=build show-depends-pkgpaths devel/bison devel/gmake pkgtools/digest  Pour avoir seulement celles d&amp;rsquo;installation :</description>
    </item>
    
    <item>
      <title>Le client de la BuildFarm de PostgreSQL dans pkgsrc-wip</title>
      <link>https://www.orgrim.net/post/2011-08-06-le-client-de-la-buildfarm-de-postgresql-dans-pkgsrc-wip/</link>
      <pubDate>Sat, 06 Aug 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-08-06-le-client-de-la-buildfarm-de-postgresql-dans-pkgsrc-wip/</guid>
      <description>&lt;p&gt;Comme j&amp;rsquo;annonçais précédemment, je contribue deux machines NetBSD à la
BuildFarm de PostgreSQL. La compilation ne se fait automagiquement
qu&amp;rsquo;après la configuration du client (écrit en Perl). Il n&amp;rsquo;est d&amp;rsquo;ailleurs
pas forcément très convi à installer, c&amp;rsquo;est pourquoi je l&amp;rsquo;ai packagé
pour pkgsrc : &lt;a href=&#34;http://pkgsrc.se/wip/pgbuildfarm&#34;&gt;http://pkgsrc.se/wip/pgbuildfarm&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Could not open relation with oid N</title>
      <link>https://www.orgrim.net/post/2011-08-04-could-not-open-relation-with-oid-n/</link>
      <pubDate>Thu, 04 Aug 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-08-04-could-not-open-relation-with-oid-n/</guid>
      <description>On peut parfois trouver cet étrange message d&amp;rsquo;erreur dans les traces de PostgreSQL (N étant un nombre) ou lors de l&amp;rsquo;exécution d&amp;rsquo;une requête :
ERROR: could not open relation with OID N  Si on recherche ce message dans les mailing-lists du projet, on peut facilement conclure que la base de données est corrompue, qu&amp;rsquo;il y a des problèmes matériels et que la sécurité des données est en péril. Et bien, ce n&amp;rsquo;est pas forcément le cas : obtenir ce message peut être tout à fait normal.</description>
    </item>
    
    <item>
      <title>Configuration réseau pour virtualiser chez OVH</title>
      <link>https://www.orgrim.net/post/2011-07-04-configuration-reseau-pour-virtualiser-chez-ovh/</link>
      <pubDate>Mon, 04 Jul 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-07-04-configuration-reseau-pour-virtualiser-chez-ovh/</guid>
      <description>Sur mon serveur chez OVH, j&amp;rsquo;ai un ensemble de machines virtuelles KVM et (bientôt) de conteneurs LXC. Pour fournir du réseau à tout ce petit monde, j&amp;rsquo;utilise de l&amp;rsquo;IPv4 et de l&amp;rsquo;IPv6, voici comment c&amp;rsquo;est configuré.
Pour l&amp;rsquo;IPv4, on a un nombre limité d&amp;rsquo;IP publiques parce que ça vaut de la thune et que ça va être de plus en tendu de multiplier les adresses, il nous faut un réseau privé (beurk), du NAT (rebeurk) et des redirections à base d&amp;rsquo;iptables (re-rebeurk).</description>
    </item>
    
    <item>
      <title>NetBSD en KVM</title>
      <link>https://www.orgrim.net/post/2011-07-04-netbsd-en-kvm/</link>
      <pubDate>Mon, 04 Jul 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-07-04-netbsd-en-kvm/</guid>
      <description>&lt;p&gt;Comme je viens d&amp;rsquo;investir dans un &lt;a href=&#34;http://www.kimsufi.com/fr/&#34;&gt;serveur kimsufi&lt;/a&gt; (le 16G), je me suis dis qu&amp;rsquo;avoir
quelques machines NetBSD pour servir la bonne cause ça serait bien cool.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Rediriger stdout/stderr depuis un script avec du pipe</title>
      <link>https://www.orgrim.net/post/2011-06-29-rediriger-stdoutstderr-depuis-un-script-avec-du-pipe/</link>
      <pubDate>Wed, 29 Jun 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-06-29-rediriger-stdoutstderr-depuis-un-script-avec-du-pipe/</guid>
      <description>Pour rediriger stdout/stderr à l&amp;rsquo;interieur vers l&amp;rsquo;entrée standard d&amp;rsquo;un commande, il faut utiliser exec et du sous-shell. Cette astuce est un bashisme a priori.
L&amp;rsquo;objectif est de renvoyer tous les messages du script dans syslog sans mettre de redirection sur la ligne de commande. Le principe général est :
exec FD&amp;gt; &amp;gt;(COMMAND)   FD est le numéro du file descriptor, 1 pour stdout, 2 pour stderr COMMAND est la commande a exécuter, elle doit bien sûr lire les données en entrée.</description>
    </item>
    
    <item>
      <title>Combiner des PDF en un seul</title>
      <link>https://www.orgrim.net/post/2011-06-21-combiner-des-pdf-en-un-seul/</link>
      <pubDate>Tue, 21 Jun 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-06-21-combiner-des-pdf-en-un-seul/</guid>
      <description>Pour combiner des pdf en un seul, on peut essayer pdfjoin fournit par le projet pdfjam. En attendant que les 250 Mo de dépendances (Latex principalement) s&amp;rsquo;installent, on peut utiliser ghostscript :
gs -sDEVICE=pdfwrite -dNOPAUSE -dQUIET -dBATCH -sOutputFile=../combined_doc.pdf *.pdf  Merci à perlmonks.org.</description>
    </item>
    
    <item>
      <title>Retrouver un trigger à partir du nom de la fonction associée</title>
      <link>https://www.orgrim.net/post/2011-04-07-retrouver-un-trigger-a-partir-du-nom-de-la-fonction-associee/</link>
      <pubDate>Thu, 07 Apr 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-04-07-retrouver-un-trigger-a-partir-du-nom-de-la-fonction-associee/</guid>
      <description>&lt;p&gt;Ici encore, tout est dans le catalogue système de PostgreSQL, il suffit
de regarder dans la table &lt;code&gt;pg_trigger&lt;/code&gt;.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Insérer des tabulations dans sa ligne de commande bash</title>
      <link>https://www.orgrim.net/post/2011-03-24-inserer-des-tabulations-dans-sa-ligne-de-commande-bash/</link>
      <pubDate>Thu, 24 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-24-inserer-des-tabulations-dans-sa-ligne-de-commande-bash/</guid>
      <description>Il y a longtemps que je me demandais comment faire ça, sans prendre la peine de rechercher ou lire le man. C&amp;rsquo;est chose faite, pour insérer une tabulation, il faut contourner la complétion de commandes avec le combo suivant :
C-v TAB  C&amp;rsquo;est simple, mais ça ne s&amp;rsquo;invente pas.
Pour le coup, c&amp;rsquo;est utile quand on veut voir un fichier de configuration sans les commentaires, par exemple postgresql.conf :</description>
    </item>
    
    <item>
      <title>pg_class.reltuples n&#39;est qu&#39;une approximation du nombre de lignes</title>
      <link>https://www.orgrim.net/post/2011-03-14-pg_classreltuples-nest-quune-approximation-du-nombre-de-lignes/</link>
      <pubDate>Mon, 14 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-14-pg_classreltuples-nest-quune-approximation-du-nombre-de-lignes/</guid>
      <description>&lt;p&gt;Dans le catalogue de PostgreSQL, qui donne plein d&amp;rsquo;information sur le
cluster et la base de données, la table &lt;code&gt;pg_class&lt;/code&gt; regroupe les
informations sur les tables, les séquences, les index, tout ce qui
contient des colonnes, appelé relation. L&amp;rsquo;un des champs disponibles est
&lt;code&gt;reltuples&lt;/code&gt;, il contient le nombre approximatif de lignes dans une
relation. C&amp;rsquo;est &lt;em&gt;approximatif&lt;/em&gt;, ainsi ce n&amp;rsquo;est pas un donnée sure&amp;hellip; La
preuve par l&amp;rsquo;exemple.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pkgin adventures - bien générer son pkg_summary</title>
      <link>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-bien-generer-son-pkg_summary/</link>
      <pubDate>Sat, 12 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-bien-generer-son-pkg_summary/</guid>
      <description>&lt;p&gt;Comme indiqué dans d&amp;rsquo;autres posts, j&amp;rsquo;abuse des chroots &lt;code&gt;pkg_comp&lt;/code&gt; pour
tenir mes paquets à jour. Je suis récemment passé à l&amp;rsquo;utilisation de
&lt;code&gt;pkgin&lt;/code&gt; pour la gestion de mes paquets une fois préparés dans le chroot.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pkgin adventures - conflit résolu</title>
      <link>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-conflit-resolu/</link>
      <pubDate>Sat, 12 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-conflit-resolu/</guid>
      <description>&lt;p&gt;Il y a quelques jours, il a été décidé de remplacer &lt;code&gt;libungif&lt;/code&gt; par
&lt;code&gt;giflib&lt;/code&gt; dans pkgsrc. Pour éviter de mixer les deux et donc avoir des
problèmes, les deux paquets se déclarent mutuellement en conflit. A
partir de maintenant la dépendance par défaut est sur &lt;code&gt;giflib&lt;/code&gt;, ce qui a
donc fait que ma mise à jour (&lt;code&gt;pkg_chk&lt;/code&gt; dans un &lt;code&gt;pkg_comp&lt;/code&gt;) a tellement
buté dessus que j&amp;rsquo;ai décidé qu&amp;rsquo;il serait plus simple de repartir d&amp;rsquo;un
chroot &lt;code&gt;pkg_comp&lt;/code&gt; tout neuf&amp;hellip;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pkgin adventures - utiliser pkgin avec pkgsrc-current</title>
      <link>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-utiliser-pkgin-avec-pkgsrc-current/</link>
      <pubDate>Sat, 12 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-utiliser-pkgin-avec-pkgsrc-current/</guid>
      <description>&lt;p&gt;&lt;strong&gt;pkgin&lt;/strong&gt; est un outil de gestion de paquets binaires pour pkgsrc, le
système de paquets de NetBSD. Pour pouvoir l&amp;rsquo;utiliser il faut donc des
paquets binaires, sauf que les binaires ne sont officiellement
disponibles que pour les releases trimestrielles de pkgsrc. Quand on
suit pkgsrc-current, il faut donc compiler les paquets et fabriquer un
dépôt.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pkgsrc, pkg_comp et ccache</title>
      <link>https://www.orgrim.net/post/2011-03-04-pkgsrc-pkg_comp-et-ccache/</link>
      <pubDate>Fri, 04 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-04-pkgsrc-pkg_comp-et-ccache/</guid>
      <description>Pour utiliser ccache dans un chroot pkg_comp, on commence par installer ccache :
# pkg_comp build devel/ccache # pkg_add /usr/pkgsrc/packages/All/ccache-3.1.4.tgz  En utilisant la cible package-install dans le chroot, ccache s&amp;rsquo;y trouve installé. On l&amp;rsquo;installe aussi sur le système pour surveiller les statistiques plus tard.
Ensuite, on édite le etc/mk.conf du chroot, par exemple /local/pkg_comp/default/etc/mk.conf, pour y définir les variables suivantes :
# ... # fin de la conf speciale pkg_comp CCACHE_DIR=${WRKOBJDIR}/.</description>
    </item>
    
    <item>
      <title>DNSSEC et Bind sur NetBSD</title>
      <link>https://www.orgrim.net/post/2011-03-03-dnssec-et-bind-sur-netbsd/</link>
      <pubDate>Thu, 03 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-03-dnssec-et-bind-sur-netbsd/</guid>
      <description>&lt;p&gt;En reconfigurant ma gateway sur NetBSD, le serveur Bind fournit dans
« basesys » refusait de fonctionner à cause de l&amp;rsquo;activation de DNSSEC
par défaut.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Accès SSH externe sur une gateway NetBSD</title>
      <link>https://www.orgrim.net/post/2011-02-26-acces-ssh-externe-sur-une-gateway-netbsd/</link>
      <pubDate>Sat, 26 Feb 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-02-26-acces-ssh-externe-sur-une-gateway-netbsd/</guid>
      <description>Pour permettre l&amp;rsquo;accès à la gateway depuis Internet avec un maximum de sécurité, j&amp;rsquo;ai configuré le serveur OpenSSH (fournit dans basesys) et PF pour :
 N&amp;rsquo;autoriser l&amp;rsquo;accès que par clé publique Empêcher les attaques par force brute sur le serveur  La configuration d&amp;rsquo;OpenSSH peut se faire de deux façon :
 On désactive l&amp;rsquo;authentification par mot de passe et l&amp;rsquo;utilisation de PAM pour que la méthode keyboard-ineractive ne laisse rien passer On désactive l&amp;rsquo;authentification par mot de passe et le challenge/respone pour garder l&amp;rsquo;utilisation de PAM  J&amp;rsquo;ai choisi la 2ème méthode qui permet de garder la fonctionnalité de pam_nologin (seul root peut se logguer si /etc/nologin existe, en modifiant /etc/ssh/sshd_config :</description>
    </item>
    
    <item>
      <title>Voir tous les champs d&#39;une table</title>
      <link>https://www.orgrim.net/post/2011-02-25-voir-tous-les-champs-dune-table/</link>
      <pubDate>Fri, 25 Feb 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-02-25-voir-tous-les-champs-dune-table/</guid>
      <description>&lt;p&gt;Avec PostgreSQL, on peut utiliser la requête suivante pour obtenir la
taille de chacune des bases de données d&amp;rsquo;un cluster :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datname&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pg_size_pretty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pg_database_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;taille&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pg_database&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>Recréer une séquence</title>
      <link>https://www.orgrim.net/post/2011-02-22-recreer-une-sequence/</link>
      <pubDate>Tue, 22 Feb 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-02-22-recreer-une-sequence/</guid>
      <description>&lt;p&gt;On peut faire ça dans 2 cas :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;On a fait n&amp;rsquo;importe quoi, et la séquence a disparu :-(&lt;/li&gt;
&lt;li&gt;On veut transformer une colonne en « SERIAL »&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>Choisir des sources d&#39;entropie pour /dev/[u]random</title>
      <link>https://www.orgrim.net/post/2011-02-22-choisir-des-sources-dentropie-pour-devurandom/</link>
      <pubDate>Thu, 30 Dec 2010 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-02-22-choisir-des-sources-dentropie-pour-devurandom/</guid>
      <description>&lt;p&gt;Pour monter un service DNS on a besoin de &lt;code&gt;/dev/random&lt;/code&gt; pour générer la
clé rndc. Sans collecte d&amp;rsquo;entropie, &lt;code&gt;/dev/random&lt;/code&gt; ne crache rien.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Dual boot Debian/NetBSD</title>
      <link>https://www.orgrim.net/post/2011-02-23-dual-boot-debiannetbsd/</link>
      <pubDate>Mon, 29 Nov 2010 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-02-23-dual-boot-debiannetbsd/</guid>
      <description>&lt;p&gt;L&amp;rsquo;installation d&amp;rsquo;un dual boot Linux/BSD est somme toute assez simple, on
coupe le disque en deux et on installe les systèmes l&amp;rsquo;un après l&amp;rsquo;autre.
La seule difficulté reste sur l&amp;rsquo;installation/configuration des
bootloaders.&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
