<!DOCTYPE html>
<html lang="fr" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | code. grind. sleep.</title>

<meta name="keywords" content="" />
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="https://www.orgrim.net/post/" />
<link href="/assets/css/stylesheet.min.e5822bfcb21f8a202b16444ca56d1de6f331407cddd45f1de4a1e0af441b35e4.css" integrity="sha256-5YIr/LIfiiArFkRMpW0d5vMxQHzd1F8d5KHgr0QbNeQ=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://www.orgrim.net/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.orgrim.net/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.orgrim.net/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.orgrim.net/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.orgrim.net/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.83.1" />
<link rel="alternate" type="application/rss&#43;xml" href="https://www.orgrim.net/post/index.xml">
<link rel="alternate" hreflang="fr" href="https://www.orgrim.net/post/" />
<link rel="alternate" hreflang="en" href="https://www.orgrim.net/en/post/" />


<meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.orgrim.net/post/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://www.orgrim.net/post/"
    }
  ]
}
</script>




</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }
    </style>

</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.orgrim.net/" accesskey="h" title="code. grind. sleep. (Alt + H)">code. grind. sleep.</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                
                

                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://www.orgrim.net/en/" title="English"
                            aria-label="English">En</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://www.orgrim.net/post" title="Blog">
                    <span class="active">Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.orgrim.net/categories" title="Catégories">
                    <span>Catégories</span>
                </a>
            </li>
            <li>
                <a href="https://www.orgrim.net/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main"> 
<header class="page-header">

  <h1>Posts</h1>
</header>





<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      IP flottante pour Patroni avec Keepalived
    </h2>
  </header>
  <section class="entry-content">
    <p>Patroni ne gère que le service PostgreSQL en pilotant la réplication. Il ne fournit volontairement aucun moyen d’accès pour les applications. Elles doivent pourtant déterminer quelle serveur PostgreSQL est accessible en écriture, pour cela une solution est de placer une adresse IP supplémentaire sur ce serveur en écriture qui est déplacée automatique en cas de bascule.
Il faut donc ajouter un service supplémentaire à l’architecture pour gérer la placement de cette adresse IP, généralement appelée, IP virtuelle, VIP, ou IP flottante : Keepalived permet de le faire....</p>
  </section>
  <footer class="entry-footer">2021-06-07&nbsp;·&nbsp;7 min
</footer>
  <a class="entry-link" aria-label="post link to IP flottante pour Patroni avec Keepalived" href="https://www.orgrim.net/post/2021-06-07-keepalived-ip-flottante-patroni/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      Installer CFSSL
    </h2>
  </header>
  <section class="entry-content">
    <p>CFSSL est l’outil de gestion de certificats TLS de CloudFlare, son principal avantage est de pouvoir créer des certificats en utilisant une configuration au format JSON bien plus facile à appréhender qu’OpenSSL.
...</p>
  </section>
  <footer class="entry-footer">2021-04-06&nbsp;·&nbsp;6 min
</footer>
  <a class="entry-link" aria-label="post link to Installer CFSSL" href="https://www.orgrim.net/post/2021-04-06-installer-cfssl/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      PostgreSQL et SELinux à l&#39;ère de systemd
    </h2>
  </header>
  <section class="entry-content">
    <p>Ce post se veut une mise à jour du post précédent sur le sujet. En effet, le module SELinux, les commandes utilisées ont évolué avec l’adoption de systemd. Les principes restent les mêmes.
...</p>
  </section>
  <footer class="entry-footer">2021-02-11&nbsp;·&nbsp;3 min
</footer>
  <a class="entry-link" aria-label="post link to PostgreSQL et SELinux à l&#39;ère de systemd" href="https://www.orgrim.net/post/2021-02-11-postgresql-et-selinux/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      Installer Go
    </h2>
  </header>
  <section class="entry-content">
    <p>Le langage Go est de plus en plus présent, on peut installer son compilateur et suite d’outil à partir des packages de sa distribution, mais le plus simple pour avoir une version la plus à jour possible est d’utiliser les binaires compilés fournis sur le site officiel.
La version du package golang-go est trop ancienne dans Debian stable (1.11), je l’ai donc installé de la façon suivante.
...</p>
  </section>
  <footer class="entry-footer">2021-01-20&nbsp;·&nbsp;2 min
</footer>
  <a class="entry-link" aria-label="post link to Installer Go" href="https://www.orgrim.net/post/2021-01-20-installer-go/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      Memento Cloud Init
    </h2>
  </header>
  <section class="entry-content">
    <p>Cloud Init permet de configurer des machines virtuelles au boot, en utilissant des méta données provenant de la plateforme ou tourne la VM (AWS, Azure, GCP, KVM Local, etc). Pour une installation sur KVM avec libvirt, il faut utiliser le module NoCloud :
 Installer le système dans un KVM, avec virt-manager et une image ISO Installer le paquet cloud-init (et le paquet sudo pour que le reste fonctionne)  # yum install cloud-init sudo Eteindre la VM Créer un répertoire de travail et s’y déplacer Créer les 3 fichiers :   user-data : contient la configuration pour ajouter son user, sa clé SSH, configurer sudo, configurer le mot de passe root meta-data : contient la configuration de la machine, le hostname, etc network-config : contient la configuration du réseau  Créer l’image ISO :  $ genisoimage -output cloudinit_la_vm.iso -volid cidata -joliet -rock user-data meta-data network-config Attacher l’image ISO Démarrer la VM ...</p>
  </section>
  <footer class="entry-footer">2020-07-28&nbsp;·&nbsp;2 min
</footer>
  <a class="entry-link" aria-label="post link to Memento Cloud Init" href="https://www.orgrim.net/post/2020-07-28-memento-cloud-init/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      Gestion des utilisateurs pgBouncer avec auth_query
    </h2>
  </header>
  <section class="entry-content">
    <p>Avec pgBouncer 1.6 sont arrivés deux nouveaux paramètres, auth_user et auth_query, qui permettent de faciliter la gestion du fichier des utilisateurs. Le fichier des utilisateurs contient les couples utilisateur / mot de passe hashé pour s’authentifier à la place de l’utilisateur final sur le serveur PostgreSQL. Il y a deux problèmes majeurs avec ce fichier utilisateur : son maintien fastidieux et le risque de collision entre noms de roles identiques mais avec des mots de passe différents si le même pgBoucner accède à plusieurs instances PostgreSQL.
...</p>
  </section>
  <footer class="entry-footer">2017-10-30&nbsp;·&nbsp;2 min
</footer>
  <a class="entry-link" aria-label="post link to Gestion des utilisateurs pgBouncer avec auth_query" href="https://www.orgrim.net/post/2017-10-30-gestion-des-utilisateurs-pgbouncer-avec-auth-query/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      Configuration de pgBouncer avec des connexions TLS
    </h2>
  </header>
  <section class="entry-content">
    <p>Un petit howto pour créer des certificats et les utiliser avec PostgreSQL et pgBouncer.
...</p>
  </section>
  <footer class="entry-footer">2017-10-27&nbsp;·&nbsp;4 min
</footer>
  <a class="entry-link" aria-label="post link to Configuration de pgBouncer avec des connexions TLS" href="https://www.orgrim.net/post/2017-10-27-configuration-de-pgbouncer-avec-des-connexions-tls/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      Réflexions sur l&#39;archivage des fichiers WAL
    </h2>
  </header>
  <section class="entry-content">
    <p>PostgreSQL faisant son bonhomme de chemin, on se retrouve désormais avec des configurations où il faut archiver plusieurs fois les WAL parce qu’on a de la sauvegarde PITR et de la réplication.
...</p>
  </section>
  <footer class="entry-footer">2015-12-30&nbsp;·&nbsp;2 min
</footer>
  <a class="entry-link" aria-label="post link to Réflexions sur l&#39;archivage des fichiers WAL" href="https://www.orgrim.net/post/2015-12-30-reflexions-sur-larchivage-des-fichiers-wal/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      pg_back le script de base pour sauvegarder PostgreSQL
    </h2>
  </header>
  <section class="entry-content">
    <p>Il y a fort longtemps, et c’est ma première contribution relative à PostgreSQL, j’ai écrit un script de backup qui dump tout un serveur PostgreSQL avec pg_dump et pg_dumpall. Il s’agit de pg_back.
...</p>
  </section>
  <footer class="entry-footer">2015-03-12&nbsp;·&nbsp;1 min
</footer>
  <a class="entry-link" aria-label="post link to pg_back le script de base pour sauvegarder PostgreSQL" href="https://www.orgrim.net/post/2015-03-12-pg-back-le-script-de-base-pour-sauvegarder-postgresql/"></a>
</article>

<article class="post-entry"> 

  <header class="entry-header">
    <h2>
      Confiner PostgreSQL avec SELinux
    </h2>
  </header>
  <section class="entry-content">
    <p>.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note{background:#e7f2fA}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip{background:#e6f9e6}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:0.125em;position:relative} Remarque
Ce post est partiellement obsolète, avec le passage à systemd. Voir la mise à jour.
 J’avais déjà expérimenté un peu avec SELinux il y a deux ans sans aller trop loin, parce que j’entendais souvent la phrase “Si on veut de la sécurité, il faut SELinux” et surtout à cause de l’arrivée de l’extension sepgsql dans les modules contrib de PostgreSQL. Ça avait donné une conf pour le Fosdem où finalement, j’ai plus parlé des privilèges classiques que de SELinux.
...</p>
  </section>
  <footer class="entry-footer">2014-09-22&nbsp;·&nbsp;4 min
</footer>
  <a class="entry-link" aria-label="post link to Confiner PostgreSQL avec SELinux" href="https://www.orgrim.net/post/2014-09-22-confiner-postgresql-avec-selinux/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://www.orgrim.net/post/page/2/">Page Suivante »</a>
  </nav>
</footer>

    </main><footer class="footer">
    <span>&copy; 2021 <a href="https://www.orgrim.net/">code. grind. sleep.</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
