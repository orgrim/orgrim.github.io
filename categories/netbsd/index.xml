<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>NetBSD on code. grind. sleep.</title>
    <link>https://www.orgrim.net/categories/netbsd/</link>
    <description>Recent content in NetBSD on code. grind. sleep.</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fr</language>
    <managingEditor>Nicolas Thauvin</managingEditor>
    <lastBuildDate>Fri, 23 Aug 2013 00:00:00 +0000</lastBuildDate><atom:link href="https://www.orgrim.net/categories/netbsd/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>modular-xorg, radeon et pas de KMS</title>
      <link>https://www.orgrim.net/post/2013-08-23-modular-xorg-radeon-et-pas-de-kms/</link>
      <pubDate>Fri, 23 Aug 2013 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2013-08-23-modular-xorg-radeon-et-pas-de-kms/</guid>
      <description>&lt;p&gt;Il y avait un moment que je n&amp;rsquo;avais pas touché à NetBSD et donc mis à
jour mon lappy avec du pkg frais. Entre temps, la version de X.org
modular, donc issue de pkgsrc, est revenue en 2012, avec son lot de
drivers mis à jour. Le drivers xf86-video-ati, est passé en version
7.1.0, sauf qu&amp;rsquo;il fonctionne uniquement en KMS (Kernel Mode Setting),
chose qu&amp;rsquo;on n&amp;rsquo;a pas encore dans notre kernel.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Un bulk build par jour dans un screen</title>
      <link>https://www.orgrim.net/post/2013-05-10-un-bulk-build-par-jour-dans-un-screen/</link>
      <pubDate>Fri, 10 May 2013 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2013-05-10-un-bulk-build-par-jour-dans-un-screen/</guid>
      <description>&lt;p&gt;Mes packages NetBSD sont préparés par pbulk, qui tourne en continu grâce
au script &lt;a href=&#34;https://github.com/orgrim/nb-utils/blob/master/pkgsrc/pbulk-builder&#34;&gt;pbulk-builder&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pbulk-builder et pkgtools/mksandbox</title>
      <link>https://www.orgrim.net/post/2013-01-26-pbulk-builder-et-pkgtoolsmksandbox/</link>
      <pubDate>Sat, 26 Jan 2013 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2013-01-26-pbulk-builder-et-pkgtoolsmksandbox/</guid>
      <description>&lt;p&gt;Après la réinstall d&amp;rsquo;une de mes machines de build en 6.0.1, j&amp;rsquo;ai eu la
bonne surprise de voir que le script de build &lt;code&gt;pbulk-builder&lt;/code&gt;
(&lt;a href=&#34;https://github.com/orgrim/nb-utils&#34;&gt;https://github.com/orgrim/nb-utils&lt;/a&gt;) ne trouvait plus &lt;code&gt;mksandbox&lt;/code&gt;
dans l&amp;rsquo;arbre de pkgsrc. Il est désormais dans son paquet :
&lt;code&gt;pkgtools/mksandbox&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Compiler dans l&#39;arbre des sources</title>
      <link>https://www.orgrim.net/post/2012-01-24-compiler-dans-larbre-des-sources/</link>
      <pubDate>Tue, 24 Jan 2012 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2012-01-24-compiler-dans-larbre-des-sources/</guid>
      <description>&lt;p&gt;Je m&amp;rsquo;occupe actuellement de préparer ma box pour le FOSDEM, et il
s&amp;rsquo;avère qu&amp;rsquo;il manque le support du DRM (Direct Rendering Manager, le
truc pour avoir de l&amp;rsquo;accélération graphique dans le kernel pour X.org)
pour ma carte vidéo. Il s&amp;rsquo;agit de NetBSD 5.1.1, la version 6 n&amp;rsquo;aura pas
ce manque.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>X11 forwarding request failed on channel 0</title>
      <link>https://www.orgrim.net/post/2011-10-21-x11-forwarding-request-failed-on-channel-0/</link>
      <pubDate>Fri, 21 Oct 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-10-21-x11-forwarding-request-failed-on-channel-0/</guid>
      <description>Quand j&amp;rsquo;essaye de me logguer sur ma box NetBSD fraichement passé en X.org modular, j&amp;rsquo;ai ça :
orgrim@serfouette ~ $ ssh rateau X11 forwarding request failed on channel 0 Last login: Fri Oct 21 12:20:24 2011 from serfouette.home.orgrim.net  WTF? ça tombe en marche SSH normalement.
Et bien le souci vient de l&amp;rsquo;échange des magic cookies pour l&amp;rsquo;authentification entre serveurs X à travers SSH, c&amp;rsquo;est utilisé par le X11 forwarding et on a besoin de plusieurs choses pour ça :</description>
    </item>
    
    <item>
      <title>Passer de X.org natif à modular</title>
      <link>https://www.orgrim.net/post/2011-09-19-passer-de-xorg-natif-a-modular/</link>
      <pubDate>Mon, 19 Sep 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-09-19-passer-de-xorg-natif-a-modular/</guid>
      <description>&lt;p&gt;X.org est fourni dans le basesys et dans pkgsrc, on appelle le premier
« native » et le second « modular » selon la valeur de la variable
&lt;code&gt;X11_TYPE&lt;/code&gt; que l&amp;rsquo;on positionne dans son &lt;code&gt;/etc/mk.conf&lt;/code&gt; pour signifier à
pkgsrc sur lequel linker.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Bulk build partiel de pkgsrc</title>
      <link>https://www.orgrim.net/post/2011-08-19-bulk-build-partiel-de-pkgsrc/</link>
      <pubDate>Fri, 19 Aug 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-08-19-bulk-build-partiel-de-pkgsrc/</guid>
      <description>En suivant l&#39;excellent tip de Mr GuiGui2, j&amp;rsquo;ai pu monter ma petite archi de bulk build personnelle pour fournir du package tout frais à pkgin.
J&amp;rsquo;ai donc ajouté le bloc magique suivant à mon /etc/mk.conf, qui permet de gérer la présence de commentaires dans pkgchk.conf :
# bulk build config DEPENDS_TARGET= bulk-install BATCH= yes BULK_PREREQ+= pkgtools/lintpkgsrc .if defined(SPECIFIC_PKGS) PKGLIST!= awk &#39;$$1 !~ /^\\#/ {print $$1}&#39; ${PKGCHK_CONF} . for _pkg_ in ${PKGLIST} HOST_SPECIFIC_PKGS+= ${_pkg_} .</description>
    </item>
    
    <item>
      <title>Montrer les dépendances avec make dans pkgsrc</title>
      <link>https://www.orgrim.net/post/2011-08-18-montrer-les-dependances-avec-make-dans-pkgsrc/</link>
      <pubDate>Thu, 18 Aug 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-08-18-montrer-les-dependances-avec-make-dans-pkgsrc/</guid>
      <description>Généralement, on peut savoir quelles sont les dépendances d&amp;rsquo;un package en utilisant make show-depends, mais cela ne montre que les dépendances pour l&amp;rsquo;installation, les dépendances pour la compilation ne sont pas montrées.
$ cd /usr/pkgsrc/databases/postgresql90-server/ $ make show-depends postgresql90-client&amp;gt;=9.0.4:../../databases/postgresql90-client  Pour connaître les dépendances selon leur type (installation ou compilation), on peut utiliser la cible show-depends-pkgpaths alliée à la variable DEPENDS_TYPE.
Pour avoir seulement les dépendances de compilation :
$ make DEPENDS_TYPE=build show-depends-pkgpaths devel/bison devel/gmake pkgtools/digest  Pour avoir seulement celles d&amp;rsquo;installation :</description>
    </item>
    
    <item>
      <title>Le client de la BuildFarm de PostgreSQL dans pkgsrc-wip</title>
      <link>https://www.orgrim.net/post/2011-08-06-le-client-de-la-buildfarm-de-postgresql-dans-pkgsrc-wip/</link>
      <pubDate>Sat, 06 Aug 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-08-06-le-client-de-la-buildfarm-de-postgresql-dans-pkgsrc-wip/</guid>
      <description>&lt;p&gt;Comme j&amp;rsquo;annonçais précédemment, je contribue deux machines NetBSD à la
BuildFarm de PostgreSQL. La compilation ne se fait automagiquement
qu&amp;rsquo;après la configuration du client (écrit en Perl). Il n&amp;rsquo;est d&amp;rsquo;ailleurs
pas forcément très convi à installer, c&amp;rsquo;est pourquoi je l&amp;rsquo;ai packagé
pour pkgsrc : &lt;a href=&#34;http://pkgsrc.se/wip/pgbuildfarm&#34;&gt;http://pkgsrc.se/wip/pgbuildfarm&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>NetBSD en KVM</title>
      <link>https://www.orgrim.net/post/2011-07-04-netbsd-en-kvm/</link>
      <pubDate>Mon, 04 Jul 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-07-04-netbsd-en-kvm/</guid>
      <description>&lt;p&gt;Comme je viens d&amp;rsquo;investir dans un &lt;a href=&#34;http://www.kimsufi.com/fr/&#34;&gt;serveur kimsufi&lt;/a&gt; (le 16G), je me suis dis qu&amp;rsquo;avoir
quelques machines NetBSD pour servir la bonne cause ça serait bien cool.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pkgin adventures - bien générer son pkg_summary</title>
      <link>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-bien-generer-son-pkg_summary/</link>
      <pubDate>Sat, 12 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-bien-generer-son-pkg_summary/</guid>
      <description>&lt;p&gt;Comme indiqué dans d&amp;rsquo;autres posts, j&amp;rsquo;abuse des chroots &lt;code&gt;pkg_comp&lt;/code&gt; pour
tenir mes paquets à jour. Je suis récemment passé à l&amp;rsquo;utilisation de
&lt;code&gt;pkgin&lt;/code&gt; pour la gestion de mes paquets une fois préparés dans le chroot.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pkgin adventures - conflit résolu</title>
      <link>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-conflit-resolu/</link>
      <pubDate>Sat, 12 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-conflit-resolu/</guid>
      <description>&lt;p&gt;Il y a quelques jours, il a été décidé de remplacer &lt;code&gt;libungif&lt;/code&gt; par
&lt;code&gt;giflib&lt;/code&gt; dans pkgsrc. Pour éviter de mixer les deux et donc avoir des
problèmes, les deux paquets se déclarent mutuellement en conflit. A
partir de maintenant la dépendance par défaut est sur &lt;code&gt;giflib&lt;/code&gt;, ce qui a
donc fait que ma mise à jour (&lt;code&gt;pkg_chk&lt;/code&gt; dans un &lt;code&gt;pkg_comp&lt;/code&gt;) a tellement
buté dessus que j&amp;rsquo;ai décidé qu&amp;rsquo;il serait plus simple de repartir d&amp;rsquo;un
chroot &lt;code&gt;pkg_comp&lt;/code&gt; tout neuf&amp;hellip;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pkgin adventures - utiliser pkgin avec pkgsrc-current</title>
      <link>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-utiliser-pkgin-avec-pkgsrc-current/</link>
      <pubDate>Sat, 12 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-12-pkgin-adventures-utiliser-pkgin-avec-pkgsrc-current/</guid>
      <description>&lt;p&gt;&lt;strong&gt;pkgin&lt;/strong&gt; est un outil de gestion de paquets binaires pour pkgsrc, le
système de paquets de NetBSD. Pour pouvoir l&amp;rsquo;utiliser il faut donc des
paquets binaires, sauf que les binaires ne sont officiellement
disponibles que pour les releases trimestrielles de pkgsrc. Quand on
suit pkgsrc-current, il faut donc compiler les paquets et fabriquer un
dépôt.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>pkgsrc, pkg_comp et ccache</title>
      <link>https://www.orgrim.net/post/2011-03-04-pkgsrc-pkg_comp-et-ccache/</link>
      <pubDate>Fri, 04 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-04-pkgsrc-pkg_comp-et-ccache/</guid>
      <description>Pour utiliser ccache dans un chroot pkg_comp, on commence par installer ccache :
# pkg_comp build devel/ccache # pkg_add /usr/pkgsrc/packages/All/ccache-3.1.4.tgz  En utilisant la cible package-install dans le chroot, ccache s&amp;rsquo;y trouve installé. On l&amp;rsquo;installe aussi sur le système pour surveiller les statistiques plus tard.
Ensuite, on édite le etc/mk.conf du chroot, par exemple /local/pkg_comp/default/etc/mk.conf, pour y définir les variables suivantes :
# ... # fin de la conf speciale pkg_comp CCACHE_DIR=${WRKOBJDIR}/.</description>
    </item>
    
    <item>
      <title>DNSSEC et Bind sur NetBSD</title>
      <link>https://www.orgrim.net/post/2011-03-03-dnssec-et-bind-sur-netbsd/</link>
      <pubDate>Thu, 03 Mar 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-03-03-dnssec-et-bind-sur-netbsd/</guid>
      <description>&lt;p&gt;En reconfigurant ma gateway sur NetBSD, le serveur Bind fournit dans
« basesys » refusait de fonctionner à cause de l&amp;rsquo;activation de DNSSEC
par défaut.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Accès SSH externe sur une gateway NetBSD</title>
      <link>https://www.orgrim.net/post/2011-02-26-acces-ssh-externe-sur-une-gateway-netbsd/</link>
      <pubDate>Sat, 26 Feb 2011 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-02-26-acces-ssh-externe-sur-une-gateway-netbsd/</guid>
      <description>Pour permettre l&amp;rsquo;accès à la gateway depuis Internet avec un maximum de sécurité, j&amp;rsquo;ai configuré le serveur OpenSSH (fournit dans basesys) et PF pour :
 N&amp;rsquo;autoriser l&amp;rsquo;accès que par clé publique Empêcher les attaques par force brute sur le serveur  La configuration d&amp;rsquo;OpenSSH peut se faire de deux façon :
 On désactive l&amp;rsquo;authentification par mot de passe et l&amp;rsquo;utilisation de PAM pour que la méthode keyboard-ineractive ne laisse rien passer On désactive l&amp;rsquo;authentification par mot de passe et le challenge/respone pour garder l&amp;rsquo;utilisation de PAM  J&amp;rsquo;ai choisi la 2ème méthode qui permet de garder la fonctionnalité de pam_nologin (seul root peut se logguer si /etc/nologin existe, en modifiant /etc/ssh/sshd_config :</description>
    </item>
    
    <item>
      <title>Choisir des sources d&#39;entropie pour /dev/[u]random</title>
      <link>https://www.orgrim.net/post/2011-02-22-choisir-des-sources-dentropie-pour-devurandom/</link>
      <pubDate>Thu, 30 Dec 2010 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-02-22-choisir-des-sources-dentropie-pour-devurandom/</guid>
      <description>&lt;p&gt;Pour monter un service DNS on a besoin de &lt;code&gt;/dev/random&lt;/code&gt; pour générer la
clé rndc. Sans collecte d&amp;rsquo;entropie, &lt;code&gt;/dev/random&lt;/code&gt; ne crache rien.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Dual boot Debian/NetBSD</title>
      <link>https://www.orgrim.net/post/2011-02-23-dual-boot-debiannetbsd/</link>
      <pubDate>Mon, 29 Nov 2010 00:00:00 +0000</pubDate>
      <author>Nicolas Thauvin</author>
      
      <guid>https://www.orgrim.net/post/2011-02-23-dual-boot-debiannetbsd/</guid>
      <description>&lt;p&gt;L&amp;rsquo;installation d&amp;rsquo;un dual boot Linux/BSD est somme toute assez simple, on
coupe le disque en deux et on installe les systèmes l&amp;rsquo;un après l&amp;rsquo;autre.
La seule difficulté reste sur l&amp;rsquo;installation/configuration des
bootloaders.&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
